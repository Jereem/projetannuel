<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <!-- appelle le template layoutbis.xhtml -->
    <ui:composition template="newTemplate.xhtml"> 
        <!-- Defini la partie nommée contenu dans le template par le bloc qui suit -->
        <ui:define name="content"> 
            <h2>Projets</h2>  
            <h:form id="form">
</h:form>
            <h:form id="upDocuments">
                <p:dialog id="dialog"  header="Documents du projet" 
                          widgetVar="dlgclt3" resizable="false"  
                          modal="true"
                          showEffect="bounce"
                          hideEffect="explode">
                    <p:ring id="basic" value="#{projet.documents}" var="doc">
                        <p:outputPanel style="text-align:center;" layout="block">
                                        #{Documents.nomDoc}
                            <p:commandButton update=":form:detail" title="View" oncomplete="PF('dlg').show()">
                                <f:setPropertyActionListener value="#{Documents}" target="#{ringDoc.selectedDoc}" />
                            </p:commandButton>
                        </p:outputPanel>
                    </p:ring>
                </p:dialog>
            </h:form>
            <h:form id="downDocuments">
                <p:dialog id="dialog"  header="Documents du projet" 
                          widgetVar="dlgclt2" resizable="false"  
                          modal="true"
                          showEffect="bounce"
                          hideEffect="explode">
                    <p:ring id="essai" value="#{projet.documents}" var="documents">
                        <p:outputPanel style="text-align:center;" layout="block">
                                        #{documents.nomDoc}
                            <p:commandButton icon="ui-icon-disk" title="Télécharger">
                            </p:commandButton>
                        </p:outputPanel>
                    </p:ring>
                </p:dialog>
            </h:form>
            <h:form id="project">
                <p:dialog id="dialog"  header="Projet" 
                          widgetVar="dlgclt1" resizable="false"  
                          modal="true"
                          showEffect="bounce"
                          hideEffect="explode">
                    <p:ring id="basic" value="#{ringDoc.doc}" var="player">
                        <p:outputPanel style="text-align:center;" layout="block">
                                        #{Documents.nomDoc}
                            <p:commandButton update=":form:detail" title="View" oncomplete="PF('dlg').show()">
                                <f:setPropertyActionListener value="#{Documents}" target="#{ringDoc.selectedDoc}" />
                            </p:commandButton>
                        </p:outputPanel>
                    </p:ring>
                </p:dialog>
            </h:form>
            
<p:tabView id="tabView">  
    <p:tab id="tab00" title="Liste des projets en cours">  
        <h:panelGrid columns="2" cellpadding="10">
                    <h:form>  
                        <p:dataTable id="tableProjetEnCours" var="projet" value="#{projet.getProjet()}" sortMode="multiple" rows="5" paginator="true">  
                            <f:facet name="header">  
                                Projets  
                            </f:facet>  

                            <p:column sortBy="nomProjet" headerText="Nom du projet">  
                                <h:outputText value="#{projet.nomProjet}" />  
                            </p:column>  

                            <p:column sortBy="societe" headerText="Societe">  
                                <h:outputText value="#{projet.client.societe}" />  
                            </p:column> 
                            
                            <p:column sortBy="nomClient" headerText="Nom du client">  
                                <h:outputText value="#{projet.client.nom}" />  
                            </p:column>  
                            
                            <p:column sortBy="nomChef" headerText="Nom du CdP">  
                                <h:outputText value="#{projet.chefDeProjet.nom}" />  
                            </p:column>  
                            
                            <p:column sortBy="nomComm" headerText="Nom du commercial">  
                                <h:outputText value="#{projet.commercial.nom}" />  
                            </p:column> 

                            <p:column headerText=" " >
                                <p:commandLink process="@this" oncomplete="dlgclt1.show()" update=":project" >
                                    <img src="fiche.png" width="24px" height="24px" />
                                    <f:setPropertyActionListener target="#{updateClient.selectedDoc}"  value="#{clt}"/> 
                                </p:commandLink>
                                <p:commandLink process="@this" oncomplete="dlgclt2.show()" update=":downDocuments" >
                                    <img src="download.png" width="24px" height="24px" />
                                    <f:setPropertyActionListener target="#{projet.documents}"  value="#{projet.documents}"/> 
                                </p:commandLink>
                                <p:commandLink process="@this" oncomplete="dlgclt3.show()" update=":upDocuments" >
                                    <img src="upload.png" width="24px" height="24px" />
                                    <f:setPropertyActionListener target="#{updateClient.selectedDoc}"  value="#{clt}"/> 
                                </p:commandLink>
                            </p:column>
                            
                        </p:dataTable>
                    </h:form>
        </h:panelGrid>  
                            
    <p:dialog id="dialog" header="Dynamic Dialog" widgetVar="dlg" dynamic="true">
        <h:outputText value="This content is loaded lazy." />
    </p:dialog> 
    </p:tab>  
    
    

//-------------------------------------------------------------------------------------------------
    <p:tab id="tab01" title="Liste des projets terminés">  
        <h:panelGrid columns="2" cellpadding="10">

        </h:panelGrid>  
    </p:tab>  

//-------------------------------------------------------------------------------------------------

  
    <p:tab id="tab1" title="Ajout d'un projet">  
        <h:panelGrid columns="2" cellpadding="10">

        </h:panelGrid>  
    </p:tab>  

//-------------------------------------------------------------------------------------------------
	
    <p:tab id="tab2" title="Modification d'un projet">  
        <h:panelGrid columns="2" cellpadding="10">  
					
        </h:panelGrid>  
    </p:tab>  
 
//-------------------------------------------------------------------------------------------------
 
    <p:tab id="tab3" title="Clôture d'un projet">  
        <h:panelGrid columns="2" cellpadding="10">  
			
        </h:panelGrid>  
    </p:tab>  
   
</p:tabView>  

            <!-- Fin du bloc "contenu" -->
        </ui:define> 
        <!-- Fin du template "layout" -->
    </ui:composition> 
</html>
