<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <!-- appelle le template layoutbis.xhtml -->
    <ui:composition template="newTemplate.xhtml"> 
        <!-- Defini la partie nommée contenu dans le template par le bloc qui suit -->
        <ui:define name="content"> 
            <h2>Adhérents</h2> 
            <p:tabView id="tabView">  
  
                    <p:tab id="tab1" title="Liste des adhérents">  
        <h:panelGrid columns="2" cellpadding="10">                      
                    
            <h:form>  

                <p:dataTable id="tableAdherent" var="etudiant" value="#{etudiantM.getAdherent()}" sortMode="multiple" rows="10" paginator="true">  
                    <f:facet name="header">                         
                        ADHERENTS  
                    </f:facet>  

                    <p:column sortBy="nom" headerText="Nom">  
                        <h:outputText value="#{etudiant.nom}" />  
                    </p:column>  

                    <p:column sortBy="prenom" headerText="Prenom">  
                        <h:outputText value="#{etudiant.prenom}" />  
                    </p:column>  

                    <p:column sortBy="promo" headerText="Promo">  
                        <h:outputText value="#{etudiant.promotion}" />  
                    </p:column>  

                </p:dataTable>

            </h:form>
					
        </h:panelGrid>  
    </p:tab>  
 
//-------------------------------------------------------------------------------------------------
                
	<p:tab id="tab2" title="Liste des anciens adhérents">  
        <h:panelGrid columns="2" cellpadding="10">                  
					
            <h:form>  

                <p:dataTable id="tableOldAdherent" var="etudiant" value="#{etudiantM.getOldAdherent()}" sortMode="multiple" rows="10" paginator="true">  

                    <f:facet name="header">                                  
                        ANCIENS ADHERENTS                              
                    </f:facet>  

                    <p:column sortBy="nom" headerText="Nom">  
                        <h:outputText value="#{etudiant.nom}" />  
                    </p:column>  

                    <p:column sortBy="prenom" headerText="Prenom">  
                        <h:outputText value="#{etudiant.prenom}" />  
                    </p:column>  

                    <p:column sortBy="promo" headerText="Promo">  
                        <h:outputText value="#{etudiant.promotion}" />  
                    </p:column>  

                </p:dataTable>

            </h:form>
					
        </h:panelGrid>  
    </p:tab>  
                
//-------------------------------------------------------------------------------------------------

    <p:tab id="tab3" title="Ajout d'un nouvel adhérent">  
                    
        <h:panelGrid columns="2" cellpadding="10">  
                        
            <h:form>  
                            
                <p:panel header="Nouvel adhérent">                                  
                    <h:panelGrid columns="3" style="margin-bottom:10px" cellpadding="5"> 

                        <h:outputText value="Titre: *" />  
                        <p:selectOneMenu value="#{etudiant.titres}">  
                            <f:selectItems value="#{etudiant.titres}" var="titres" itemValue="#{titres.getNomTitre()}" /> 
                        </p:selectOneMenu>
                        <p></p>
                               
                        <h:outputText value="Nom : *" />  
                        <h:inputText id="nom" value="#{etudiant.nom}" >
                            <f:ajax event="blur" render="nomMessage" />
                        </h:inputText>
                        <h:message id="nomMessage" for="nom" errorClass="erreur" />

                        <h:outputText value="Prénom : *" />  
                        <h:inputText id="prenom" value="#{etudiant.prenom}" >
                            <f:ajax event="blur" render="prenomMessage" />
                        </h:inputText>
                        <h:message id="prenomMessage" for="prenom" errorClass="erreur" />

                        <h:outputText value="Numéro de sécurité sociale : *" />  
                        <h:inputText id="numSS" value="#{etudiant.numeroSS}" >
                            <f:ajax event="blur" render="numSSMessage" />
                        </h:inputText>
                        <h:message id="numSSMessage" for="numSS" errorClass="erreur" />                                    

                        <h:outputText value="Date de naissance (jj/mm/aaaa): *" />
                        <p:calendar value="#{etudiant.dateNaissance}" id="popupButtonCal" pattern="dd/MM/yyyy" showOn="button" />
                        <p></p>

                    </h:panelGrid>  
                </p:panel>  
                           
                <p:panel header="Coordonnées">                           
                    <h:panelGrid columns="3" style="margin-bottom:10px" cellpadding="5">                                    

                        <h:outputText value="Numéro : *" />  
                        <h:inputText id="numRue" value="#{coordonnees.numRue}" >
                            <f:ajax event="blur" render="numRueMessage" />
                        </h:inputText>
                        <h:message id="numRueMessage" for="numRue" errorClass="erreur" />                                    

                        <h:outputText value="Type de voie: *" />  
                        <p:selectOneMenu value="#{coordonnees.voies}">  
                            <f:selectItems value="#{coordonnees.voies}" var="voies" itemValue="#{voies.getNomVoie()}" /> 
                        </p:selectOneMenu>
                        <p></p>                                    

                        <h:outputText value="Nom de la rue : *" />  
                        <h:inputText id="rue" value="#{coordonnees.rue}" >
                            <f:ajax event="blur" render="rueMessage" />
                        </h:inputText>
                        <h:message id="rueMessage" for="rue" errorClass="erreur" />                                                                        

                        <h:outputText value="Code postal : *" />  
                        <h:inputText id="CP" value="#{coordonnees.codePostal}" >
                            <f:ajax event="blur" render="CPMessage" />
                        </h:inputText>
                        <h:message id="CPMessage" for="CP" errorClass="erreur" />                                    

                        <h:outputText value="Ville : *" />  
                        <h:inputText id="ville" value="#{coordonnees.ville}" >
                            <f:ajax event="blur" render="villeMessage" />
                        </h:inputText>
                        <h:message id="villeMessage" for="ville" errorClass="erreur" />

                        <h:outputText value="Pays : *" />  
                        <h:inputText id="pays" value="#{coordonnees.pays}" >
                            <f:ajax event="blur" render="paysMessage" />
                        </h:inputText>
                        <h:message id="paysMessage" for="pays" errorClass="erreur" />                                    

                        <h:outputText value="Email : *" />  
                        <h:inputText id="eMail" value="#{coordonnees.email}" >
                            <f:ajax event="blur" render="eMailMessage" />
                        </h:inputText>
                        <h:message id="eMailMessage" for="eMail" errorClass="erreur" />

                        <h:outputText value="Telephone fixe : *" />  
                        <h:inputText id="telFixe" value="#{coordonnees.telFixe}" >
                            <f:ajax event="blur" render="telFixeMessage" />
                        </h:inputText>
                        <h:message id="telFixeMessage" for="telFixe" errorClass="erreur" />                                    

                        <h:outputText value="Téléphone mobile : *" />  
                        <h:inputText id="telPortable" value="#{coordonnees.telPortable}" >
                            <f:ajax event="blur" render="telPortableMessage" />
                        </h:inputText>
                        <h:message id="telPortableMessage" for="telPortable" errorClass="erreur" />                                    

                    </h:panelGrid>
                </p:panel> 
                           
                <p:panel header="Scolarité">                           
                    <h:panelGrid columns="3" style="margin-bottom:10px" cellpadding="5">

                        <h:outputText value="Année de promotion : *" />  
                        <h:inputText id="promotion" value="#{etudiant.promotion}" >
                            <f:ajax event="blur" render="promotionMessage" />
                        </h:inputText>
                        <h:message id="promotionMessage" for="promotion" errorClass="erreur" />

                    </h:panelGrid>
                </p:panel> 

                <!-- Envoie le formulaire -->
                <p:commandButton value="Enregistrer" id="submit" action="#{etudiantM.saveNewAdherent}"/>  

            </h:form>  

        </h:panelGrid>  
    </p:tab> 

//-------------------------------------------------------------------------------------------------

    <p:tab id="tab4" title="Suppression d'un adhérent">  
        <h:panelGrid columns="2" cellpadding="10">  
		
            <h:form>  
                            
                <p:panel header="Supression">                                  
                    <h:panelGrid columns="3" style="margin-bottom:10px" cellpadding="5"> 

                        <h:outputText value="Nom : *" />  
                        <h:inputText id="nom" value="#{etudiant.nom}" >
                            <f:ajax event="blur" render="nomMessage" />
                        </h:inputText>
                        <h:message id="nomMessage" for="nom" errorClass="erreur" />

                        <h:outputText value="Prénom : *" />  
                        <h:inputText id="prenom" value="#{etudiant.prenom}" >
                            <f:ajax event="blur" render="prenomMessage" />
                        </h:inputText>
                        <h:message id="prenomMessage" for="prenom" errorClass="erreur" />
                                 
                    </h:panelGrid>  
                </p:panel>

                <!-- Envoie le formulaire -->
                <p:commandButton value="Supprimer" action="#{etudiantM.delAdherent}"/>
                                
            </h:form>

        </h:panelGrid>  
    </p:tab>  

//-------------------------------------------------------------------------------------------------

    <p:tab id="tab5" title="Modification">  
        <h:panelGrid columns="2" cellpadding="10">  
 
            <p:tabView id="tabView">  
  
                <p:tab id="tab1" title="Modification informations adhérent">  
                    <h:panelGrid columns="2" cellpadding="10">
							
                    </h:panelGrid>  	
                </p:tab>  

            //-------------------------------------------------------------------------------------------------
	    
            <p:tab id="tab2" title="Modification coordonnées">  
                <h:panelGrid columns="2" cellpadding="10">  		

                    <h:form>                   
                        <p:panel header="Coordonnées">                                               
                            <h:panelGrid columns="3" style="margin-bottom:10px" cellpadding="5">                                    
                        
                                <h:outputText value="Numéro : *" />  
                                <h:inputText id="numRue" value="#{coordonnees.numRue}" >
                                    <f:ajax event="blur" render="numRueMessage" />
                                </h:inputText>
                                <h:message id="numRueMessage" for="numRue" errorClass="erreur" />                                    

                                <h:outputText value="Type de voie: *" />  
                                <p:selectOneMenu value="#{coordonnees.voies}">  
                                    <f:selectItems value="#{coordonnees.voies}" var="voies" itemValue="#{voies.getNomVoie()}" /> 
                                </p:selectOneMenu>
                                <p></p>                                    

                                <h:outputText value="Nom de la rue : *" />  
                                <h:inputText id="rue" value="#{coordonnees.rue}" >
                                    <f:ajax event="blur" render="rueMessage" />
                                </h:inputText>
                                <h:message id="rueMessage" for="rue" errorClass="erreur" />                                                                        

                                <h:outputText value="Code postal : *" />  
                                <h:inputText id="CP" value="#{coordonnees.codePostal}" >
                                    <f:ajax event="blur" render="CPMessage" />
                                </h:inputText>
                                <h:message id="CPMessage" for="CP" errorClass="erreur" />                                    

                                <h:outputText value="Ville : *" />  
                                <h:inputText id="ville" value="#{coordonnees.ville}" >
                                    <f:ajax event="blur" render="villeMessage" />
                                </h:inputText>
                                <h:message id="villeMessage" for="ville" errorClass="erreur" />

                                <h:outputText value="Pays : *" />  
                                <h:inputText id="pays" value="#{coordonnees.pays}" >
                                    <f:ajax event="blur" render="paysMessage" />
                                </h:inputText>
                                <h:message id="paysMessage" for="pays" errorClass="erreur" />                                    

                                <h:outputText value="Email : *" />  
                                <h:inputText id="eMail" value="#{coordonnees.email}" >
                                    <f:ajax event="blur" render="eMailMessage" />
                                </h:inputText>
                                <h:message id="eMailMessage" for="eMail" errorClass="erreur" />

                                <h:outputText value="Telephone fixe : *" />  
                                <h:inputText id="telFixe" value="#{coordonnees.telFixe}" >
                                    <f:ajax event="blur" render="telFixeMessage" />
                                </h:inputText>
                                <h:message id="telFixeMessage" for="telFixe" errorClass="erreur" />                                    

                                <h:outputText value="Téléphone mobile : *" />                              
                                <h:inputText id="telPortable" value="#{coordonnees.telPortable}" >
                                    <f:ajax event="blur" render="telPortableMessage" />
                                </h:inputText>
                                <h:message id="telPortableMessage" for="telPortable" errorClass="erreur" />                                    

                            </h:panelGrid>
                        </p:panel>

                        <!-- Envoie le formulaire -->                
                        <p:commandButton value="Modifier" action="#{etudiantM.modifyCoordonnees}"/>  
            
                    </h:form>  

                </h:panelGrid>  	
            </p:tab>  
  
            </p:tabView>  

        </h:panelGrid>  
    </p:tab>
	
</p:tabView> 

            <!-- Fin du bloc "contenu" -->
        </ui:define> 
        <!-- Fin du template "layout" -->
    </ui:composition> 
</html>
