<?xml version='1.0' encoding='UTF-8' ?> 
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">

    <!-- appelle le template layoutbis.xhtml -->
    <ui:composition template="newTemplate.xhtml"> 
        <!-- Defini la partie nommée contenu dans le template par le bloc qui suit -->
        <ui:define name="content"> 
            <h2>Adhérents</h2> 
            <p:accordionPanel>  
                <p:tab title="Ajouter un nouvel adhérent">  
                    <h:panelGrid columns="2" cellpadding="10">  
                        <h:form>  

                            <p:panel header="Nouvel adhérent">  
                                <h:panelGrid columns="3" style="margin-bottom:10px" cellpadding="5"> 

                                    <h:outputText value="Titre: *" />  
                                    <p:selectOneMenu value="#{etudiant.titre}">  
                                        <f:selectItems value="#{etudiant.titres}" var="titres" itemValue="#{titres.getNomTitre()}" /> 
                                    </p:selectOneMenu>
                                    <p></p>

                                    <h:outputText value="Nom : *" />  
                                    <h:inputText id="nom" value="#{etudiant.nom}" >
                                    <f:ajax event="blur" render="nomMessage" />
                                    </h:inputText>
                                    <h:message id="nomMessage" for="nom" errorClass="erreur" />

                                    <h:outputText value="Prénom : *" />  
                                    <h:inputText id="prenom" value="#{etudiant.prenom}" >
                                    <f:ajax event="blur" render="prenomMessage" />
                                    </h:inputText>
                                    <h:message id="prenomMessage" for="prenom" errorClass="erreur" />

                                    <h:outputText value="Numéro de sécurité sociale : *" />  
                                    <h:inputText id="numSS" value="#{etudiant.numeroSS}" >
                                    <f:ajax event="blur" render="numSSMessage" />
                                    </h:inputText>
                                    <h:message id="numSSMessage" for="numSS" errorClass="erreur" />

                                    <h:outputText value="Date de naissance : *" />
                                    <p:calendar value="#{etudiant.dateNaissance}" id="popupButtonCal" showOn="button" />
                                    <p></p>

                                </h:panelGrid>  
                            </p:panel>  

                           <p:panel header="Coordonnées">                           
                                <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">
                                    <h:outputText value="Numéro : *" />  
                                    <p:inputText value="#{coordonnees.numRue}" />
                                    <h:outputText value="Type de voie: *" />  
                                    <p:selectOneMenu value="#{coordonnees.voies}">  
                                        <f:selectItems value="#{coordonnees.voies}" var="voies" itemValue="#{voies.getNomVoie()}" /> 
                                    </p:selectOneMenu>
                                    <h:outputText value="Nom de la rue : *" />  
                                    <p:inputText value="#{coordonnees.rue}" /> 
                                    <h:outputText value="Code postal : *" />  
                                    <p:inputText value="#{coordonnees.codePostal}" /> 
                                    <h:outputText value="Ville : *" />  
                                    <p:inputText value="#{coordonnees.ville}" /> 
                                    <h:outputText value="Pays : *" />  
                                    <p:inputText value="#{coordonnees.pays}" /> 
                                    <h:outputText value="Email : *" />  
                                    <p:inputText value="#{coordonnees.eMail}" /> 
                                    <h:outputText value="Telephone fixe : *" />  
                                    <p:inputText value="#{coordonnees.telFixe}" /> 
                                    <h:outputText value="Téléphone mobile : *" />  
                                    <p:inputText value="#{coordonnees.telPortable}" />

                                </h:panelGrid>
                            </p:panel> 

                            <p:panel header="Scolarité">                           
                                <h:panelGrid columns="2" style="margin-bottom:10px" cellpadding="5">

                                    <h:outputText value="Année de promotion : *" />  
                                    <p:inputText value="#{etudiant.promotion}" />    

                                </h:panelGrid>
                            </p:panel> 

                            <!-- Envoie le formulaire et passe a la page test2.xhtml -->
                            <p:commandButton value="Save" action="#{etudiant.saveEtudiant()}"/>  

                        </h:form>  
                    </h:panelGrid>  
                </p:tab>  
                <p:tab title="Supprimer un adhérent">  
                    <h:form>  

                        <h3>Inline</h3>  
                        <p:calendar value="#{etudiant.dateNaissance}" mode="inline" id="inlineCal"/>     

                        <p:commandButton value="Submit" />  

                    </h:form>
                </p:tab>  
                <p:tab title="Liste des adhérents">  
                    <h:form>  

                        <p:dataTable id="dataTable" var="bureauProGphy" value="#{bureauProGphy.getBureauProGphy()}" sortMode="multiple" rows="5" paginator="true">  
                            <f:facet name="header">  
                                Membres  
                            </f:facet>  

                            <p:column sortBy="pseudo" headerText="Pseudo">  
                                <h:outputText value="#{bureauProGphy.identifiant}" />  
                            </p:column>  

                            <p:column sortBy="mdp" headerText="Mdp">  
                                <h:outputText value="#{bureauProGphy.mdp}" />  
                            </p:column>  

                            <p:column sortBy="actif" headerText="Actif">  
                                <h:outputText value="#{bureauProGphy.actif}" />  
                            </p:column>  

                        </p:dataTable>
                    </h:form>
                </p:tab>  
                <p:tab title="Liste des anciens adhérents">  
                    <h:form>  

                        <p:dataTable id="dataTable" var="bureauProGphy" value="#{bureauProGphy.getBureauProGphy()}" sortMode="multiple" rows="5" paginator="true">  
                            <f:facet name="header">  
                                Membres  
                            </f:facet>  

                            <p:column sortBy="pseudo" headerText="Pseudo">  
                                <h:outputText value="#{bureauProGphy.identifiant}" />  
                            </p:column>  

                            <p:column sortBy="mdp" headerText="Mdp">  
                                <h:outputText value="#{bureauProGphy.mdp}" />  
                            </p:column>  

                            <p:column sortBy="actif" headerText="Actif">  
                                <h:outputText value="#{bureauProGphy.actif}" />  
                            </p:column>  

                        </p:dataTable>
                    </h:form>
                </p:tab>

            </p:accordionPanel>

            <!-- Fin du bloc "contenu" -->
        </ui:define> 
        <!-- Fin du template "layout" -->
    </ui:composition> 
</html>